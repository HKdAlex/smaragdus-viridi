# Руководство по UI-тестированию Smaragdus Viridi

## 1. Обзор документа

- **Назначение**: предоставить QA-команде структурированный перечень UI-сценариев для ручного тестирования сайта Smaragdus Viridi.
- **Область покрытия**: клиентские пользовательские потоки (desktop/mobile), а также ключевые сценарии административной панели.
- **Версия**: 1.0 (ноябрь 2025).

## 2. Организация тестов

- **Подход**: manual functional testing, smoke → regression → exploratory.
- **Приоритеты**:
  - `P0` — критично для продажи/безопасности, блокирует релиз.
  - `P1` — высокая важность, влияет на опыт пользователя.
  - `P2` — второстепенно, эстетика и улучшения UX.
- **Среды**:
  - Production preview (read-only) — smoke.
  - Staging (full access) — регрессия, негативные сценарии.
  - Local (при необходимости разработчика) — воспроизведение дефектов.
- **Поддерживаемые платформы**:
  - Браузеры: Chrome (desktop/mobile), Safari (desktop/iOS), Firefox (desktop).
  - Устройства: 1280×800, 1920×1080, iPhone 14, iPad Air.

## 3. Предусловия

- Созданы тестовые учетные записи: `qa.user@smaragdus.test` (customer), `qa.premium@smaragdus.test` (premium), `qa.admin@smaragdus.test` (admin).
- Тестовые данные в базе: ассортимент камней (34+ позиций), тестовые заказы, тестовые сертификаты.
- Чистый кэш браузера, отключены расширения, включен лог консоли (для фиксации ошибок).

## 4. Тестовые сценарии

### 4.1 Общие проверки интерфейса (Smoke)

1. **UI-001 (P0)**  
   **Цель**: Проверка доступности главной страницы.  
   **Шаги**: Открыть главную страницу `/`.  
   **Ожидаемый результат**: Заголовок, хиро-блок, навигация и CTA отображаются без ошибок, время загрузки < 3 сек при нормальном канале.

2. **UI-002 (P0)**  
   **Цель**: Проверка глобальной навигации.  
   **Шаги**: Из главного меню открыть `Каталог`, `О нас`, `Контакты`, `Профиль`.  
   **Ожидаемый результат**: Страницы загружаются, активный пункт подсвечен, URL соответствует ожидаемому.

3. **UI-003 (P1)**  
   **Цель**: Переключение языка.  
   **Шаги**: Использовать переключатель языка (RU ⇄ EN).  
   **Ожидаемый результат**: Локализация всех ключевых элементов обновляется без перезагрузки состояния страниц.

4. **UI-004 (P1)**  
   **Цель**: Проверка адаптивности.  
   **Шаги**: Изменить viewport до ширины 360px и 768px.  
   **Ожидаемый результат**: Бургеры/мобильные меню работают, элементы не обрезаются.

### 4.2 Аутентификация и профиль

5. **AUTH-001 (P0)**  
   **Цель**: Авторизация существующего пользователя.  
   **Шаги**: Перейти `/login`, ввести валидные учетные данные `qa.user@…`, нажать «Войти».  
   **Ожидаемый результат**: Перенаправление в профиль, отображение имени пользователя.

6. **AUTH-002 (P0)**  
   **Цель**: Обработка некорректных данных.  
   **Шаги**: Ввести неверный пароль.  
   **Ожидаемый результат**: Появляется локализованное сообщение об ошибке, подсказка без утечки деталей.

7. **AUTH-003 (P1)**  
   **Цель**: Восстановление пароля.  
   **Шаги**: Перейти `/forgot-password`, инициировать восстановление.  
   **Ожидаемый результат**: Подтверждение отправки письма, запись события в Supabase (проверить логи).

8. **AUTH-004 (P1)**  
   **Цель**: Обновление профиля.  
   **Шаги**: В разделе профиля изменить телефон/валюту.  
   **Ожидаемый результат**: Данные сохраняются, всплывающее уведомление «Сохранено».

### 4.3 Каталог и поиск

9. **CAT-001 (P0)**  
   **Цель**: Загрузка каталога `/catalog`.  
   **Шаги**: Перейти на страницу, дождаться загрузки карточек.  
   **Ожидаемый результат**: Отображается сетка товаров, счётчик найденных позиций.

10. **CAT-002 (P0)**  
    **Цель**: Фильтрация по ключевым параметрам.  
    **Шаги**: Применить фильтры по весу, цене, цвету.  
    **Ожидаемый результат**: Список обновляется моментально, URL содержит параметры, кнопка «Сбросить» активируется.

11. **CAT-003 (P1)**  
    **Цель**: Комбинированный поиск.  
    **Шаги**: Использовать строку поиска по серийному номеру и одновременно фильтры.  
    **Ожидаемый результат**: Возвращается корректный набор, присутствует подсветка совпадений (если предусмотрено).

12. **CAT-004 (P1)**  
    **Цель**: Поведение при пустом результате.  
    **Шаги**: Установить параметры, дающие 0 результатов.  
    **Ожидаемый результат**: Показан экран «ничего не найдено» с рекомендацией сбросить фильтры.

13. **CAT-005 (P2)**  
    **Цель**: Проверка бесконечной прокрутки / пагинации (если активна).  
    **Шаги**: Пролистать каталог до конца.  
    **Ожидаемый результат**: Догрузка выполняется плавно, индикатор загрузки скрывается после выполнения.

### 4.4 Карточка товара

14. **PDP-001 (P0)**  
    **Цель**: Открытие карточки камня.  
    **Шаги**: Из каталога перейти к первому камню.  
    **Ожидаемый результат**: Отображается полная информация, изображения/видео загружаются.

15. **PDP-002 (P0)**  
    **Цель**: Проверка медиа.  
    **Шаги**: Просмотреть галерею, открыть видео (если доступно).  
    **Ожидаемый результат**: Галерея листается, видео проигрывается без ошибок CSP.

16. **PDP-003 (P1)**  
    **Цель**: Проверка сертификатов.  
    **Шаги**: Скачать или открыть сертификат.  
    **Ожидаемый результат**: Файл доступен, watermark присутствует, доступ ограничен авторизованным пользователям (если требуется).

17. **PDP-004 (P1)**  
    **Цель**: Добавление в корзину.  
    **Шаги**: Нажать «Добавить в корзину».  
    **Ожидаемый результат**: Количество в корзине увеличивается, всплывающее уведомление.

### 4.5 Корзина и оформление заказа

18. **CART-001 (P0)**  
    **Цель**: Просмотр корзины.  
    **Шаги**: Перейти `/cart`.  
    **Ожидаемый результат**: Отображаются добавленные позиции, суммы в выбранной валюте.

19. **CART-002 (P0)**  
    **Цель**: Обновление количества/удаление.  
    **Шаги**: Изменить количество, удалить позицию.  
    **Ожидаемый результат**: Пересчет итога, уведомление об удалении.

20. **CART-003 (P0)**  
    **Цель**: Оформление заказа.  
    **Шаги**: Перейти к checkout, заполнить форму, выбрать метод оплаты.  
    **Ожидаемый результат**: Создается заказ, показывается экран подтверждения, письмо отправлено.

21. **CART-004 (P1)**  
    **Цель**: Негативное тестирование checkout.  
    **Шаги**: Оставить обязательные поля пустыми.  
    **Ожидаемый результат**: Валидированные ошибки, кнопка «Подтвердить» заблокирована.

### 4.6 Пользовательский кабинет

22. **ACC-001 (P1)**  
    **Цель**: Просмотр истории заказов.  
    **Шаги**: Открыть раздел «Мои заказы».  
    **Ожидаемый результат**: Список заказов с корректными статусами и датами.

23. **ACC-002 (P1)**  
    **Цель**: Просмотр деталей заказа.  
    **Шаги**: Открыть заказ, проверить трекинг.  
    **Ожидаемый результат**: Отображаются позиции, статусы, кнопки повторного скачивания документов.

24. **ACC-003 (P2)**  
    **Цель**: Проверка избранного (если включено).  
    **Шаги**: Добавить камень в избранное, перейти в список избранного.  
    **Ожидаемый результат**: Позиции синхронизируются между сессиями.

### 4.7 Административная панель

25. **ADMIN-001 (P0)**  
    **Цель**: Авторизация администратора.  
    **Шаги**: Войти как `qa.admin@…`.  
    **Ожидаемый результат**: Доступ к панели, нет доступа у неадминов (проверить редирект).

26. **ADMIN-002 (P0)**  
    **Цель**: Управление запасами.  
    **Шаги**: Создать тестовый камень, отредактировать существующий, архивировать.  
    **Ожидаемый результат**: Изменения отражаются в базе, подтверждающие уведомления.

27. **ADMIN-003 (P1)**  
    **Цель**: Управление заказами.  
    **Шаги**: Обновить статус заказа, добавить комментарий, экспортировать CSV.  
    **Ожидаемый результат**: Статус изменился, CSV корректный, дата/время записаны.

28. **ADMIN-004 (P1)**  
    **Цель**: Аналитика.  
    **Шаги**: Открыть дашборд, сменить диапазон дат.  
    **Ожидаемый результат**: Графики обновляются, нет ошибок запросов к Supabase.

29. **ADMIN-005 (P2)**  
    **Цель**: Проверка загрузки медиа.  
    **Шаги**: Загрузить изображение, проверить превью, удалить.  
    **Ожидаемый результат**: Файл сохраняется, доступен для карточки, после удаления исчезает из списка.

### 4.8 Чат и поддержка

30. **CHAT-001 (P1)**  
    **Цель**: Инициация чата.  
    **Шаги**: Нажать «Связаться» на сайте, начать чат.  
    **Ожидаемый результат**: Открывается окно чата, отправляется приветственное сообщение.

31. **CHAT-002 (P1)**  
    **Цель**: Отправка вложений.  
    **Шаги**: Прикрепить изображение или PDF.  
    **Ожидаемый результат**: Файл отправлен, доступен для скачивания администратору.

32. **CHAT-003 (P2)**  
    **Цель**: Поведение офлайн.  
    **Шаги**: Смоделировать отсутствие оператора (через админ-панель).  
    **Ожидаемый результат**: Автоответ, запись лида в CRM (если интеграция настроена).

### 4.9 Визуализация и 3D

33. **3D-001 (P1)**  
    **Цель**: Проверка 3D-демо.  
    **Шаги**: Перейти `/3d-visualizer-demo`, взаимодействовать с моделью.  
    **Ожидаемый результат**: Вращение/масштабирование работает, fps стабильный.

34. **3D-002 (P2)**  
    **Цель**: Подбор размера кольца.  
    **Шаги**: Изменить параметр размера, типа пальца.  
    **Ожидаемый результат**: Модель обновляется, подсказки корректны.

### 4.10 Мультивалютность

35. **CUR-001 (P1)**  
    **Цель**: Переключение валюты.  
    **Шаги**: Сменить валюту в интерфейсе.  
    **Ожидаемый результат**: Цены пересчитываются, формат соответствуют локалям.

36. **CUR-002 (P1)**  
    **Цель**: Геодетект.  
    **Шаги**: Смоделировать вход из другой страны (через devtools).  
    **Ожидаемый результат**: Предложение подходящей валюты, без автосмены без согласия.

### 4.11 Безопасность и негативные сценарии

37. **SEC-001 (P0)**  
    **Цель**: Доступ к защищённым страницам без авторизации.  
    **Шаги**: Открыть `/profile`, `/admin` без входа.  
    **Ожидаемый результат**: Редирект на логин/страницу «нет доступа».

38. **SEC-002 (P0)**  
    **Цель**: Проверка хранения персональных данных.  
    **Шаги**: Осмотреть ответы API в DevTools.  
    **Ожидаемый результат**: Нет утечек PII, токены не попадют в логи.

39. **SEC-003 (P1)**  
    **Цель**: Валидация форм на XSS/SQL-инъекции.  
    **Шаги**: Ввести `<script>alert(1)</script>` в текстовые поля.  
    **Ожидаемый результат**: Поле отклоняет ввод или экранирует его.

### 4.12 Наблюдаемость и логи

40. **OBS-001 (P1)**  
    **Цель**: Проверка логирования ошибок.  
    **Шаги**: Вызвать контролируемую ошибку (неправильный API-запрос).  
    **Ожидаемый результат**: Ошибка фиксируется в логах Supabase/Next.js, пользователь получает корректное сообщение.

41. **OBS-002 (P2)**  
    **Цель**: Проверка аналитики.  
    **Шаги**: Выполнить ключевые события (поиск, добавление в корзину).  
    **Ожидаемый результат**: События отражаются в аналитике (если интеграция активна).

## 5. Рекомендации по отчетности

- Фиксировать дефекты в системе трекинга с указанием `Test ID`, среды, приоритетов и приложенными логами/скриншотами.
- Разделять дефекты по типу: функциональная ошибка, визуальная проблема, производительность, локализация, безопасность.
- Поддерживать актуальность документа: после каждого релиза обновлять покрытие и приоритеты.

## 6. Критерии завершения тестирования

- Выполнены все `P0` и `P1` сценарии без открытых блокирующих дефектов.
- Оформлены отчеты по найденным дефектам, подтверждена фиксация.
- Проведено smoke-тестирование на production preview перед релизом.

---
